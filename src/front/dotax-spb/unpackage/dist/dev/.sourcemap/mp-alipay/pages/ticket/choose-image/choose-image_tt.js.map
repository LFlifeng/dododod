{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/main.js","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?e94d","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?cfc0","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?a640","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?44b9","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?f2ba","webpack:///C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue?d9ce"],"names":["createPage","Page","components","uniPopup","data","title","images","submitPercent","recgzs","biz","userName","userId","isImage","onShow","onReady","beforeMount","beforeCreate","onLoad","option","handleChooseImage","that","scanGrant","uni","getStorageSync","showModal","content","showCancel","success","res","switchTab","url","splits","split","setNavigationBarTitle","methods","handlePreviewImage","e","current","target","dataset","src","previewImage","urls","flag","length","showToast","icon","duration","types","chooseImage","sourceType","count","concat","tempFilePaths","handleNaddImage","fail","err","console","log","handleCancel","cancelText","confirmText","confirm","navigateBack","cancel","handleDelete","index","splice","handleSubmit","openProgressPopup","store","state","userInfo","percent","Math","ceil","forEach","item","setTimeout","singleSubmit","imageSrc","uploadFile","BaseUrl","filePath","fileType","name","formData","rsp","statusCode","JSON","parse","stringify","invoices","invoice","recgzStatus","duplicate","localImageSrc","idReiterated","push","empty","InvoiceModel","deftType","source","invoiceType","complete","setStorage","key","navigateTo","closeProgressPopup","$refs","progress","open","close","handleAddImage","btn","handleInvoiceImageError","handlePreviewInvoiceImage","indicator"],"mappings":"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","file":"pages/ticket/choose-image/choose-image_tt.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/ticket/choose-image/choose-image_tt.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./choose-image_tt.vue?vue&type=template&id=5a10fcfa&\"\nvar renderjs\nimport script from \"./choose-image_tt.vue?vue&type=script&lang=js&\"\nexport * from \"./choose-image_tt.vue?vue&type=script&lang=js&\"\nimport style0 from \"./choose-image_tt.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/dotax-spb/src/front/dotax-spb/pages/ticket/choose-image/choose-image_tt.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./choose-image_tt.vue?vue&type=template&id=5a10fcfa&\"","var components = {\n  \"uni-popup\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./choose-image_tt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./choose-image_tt.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniPopup from '@/components/uni-popup/uni-popup.vue';\nimport {\n\tBaseUrl\n} from '@/utils/luch-request/index.js';\nimport store from '@/store/index.js';\nimport {\n\tClone,\n\tInvoiceModel,\n\tsetObjPropNullToEmpty\n} from '@/common/spb.js';\n\nexport default {\n\tcomponents: {\n\t\tuniPopup\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttitle: '拍照收票',\n\t\t\timages: [],\n\t\t\tsubmitPercent: 0,\n\t\t\trecgzs: [],\n\t\t\t// pzsp:拍照识票 dksp:抵扣收票\n\t\t\tbiz: 'pzsp',\n\t\t\tuserName: '',\n\t\t\tuserId: \"\",\n\t\t\tisImage: true\n\t\t};\n\t},\n\tonShow() {\n\t\t\n\t},\n\tonReady(){\n\t\t\n\t},\n\tbeforeMount() {\n\t\t// this.handleChooseImage(0);\n\t},\n\tbeforeCreate() {\n\t\t\n\t},\n\tonLoad(option) {\n\t\tthis.submitPercent = 0;\n\t\tthis.handleChooseImage(0);\n\t\tlet that = this;\n\t\tlet biz = option.biz;\n\t\tif (biz) that.biz = biz;\n\t\tswitch (this.biz) {\n\t\t\tcase 'dksp':\n\t\t\t\tthat.title = '抵扣收票';\n\t\t\t\tlet scanGrant = uni.getStorageSync('scanGrant');\n\t\t\t\tif (!scanGrant) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\tcontent: '请扫二维码授权！',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '/pages/tab-bar/home/home_tt'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet splits = scanGrant.split(',');\n\t\t\t\tthis.userName = splits[0];\n\t\t\t\tthis.userId = splits[1];\n\t\t\t\tbreak;\n\t\t\tcase 'pzsp':\n\t\t\tdefault:\n\t\t\t\tthat.title = '拍照识票';\n\t\t\t\tbreak;\n\t\t}\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle: that.title\n\t\t});\n\n\t},\n\tmethods: {\n\t\thandlePreviewImage(e) {\n\t\t\tvar current = e.target.dataset.src;\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: current,\n\t\t\t\turls: this.images\n\t\t\t});\n\t\t},\n\t\t//打开相机\n\t\thandleChooseImage(flag) {\n\t\t\tvar that = this;\n\t\t\tif (this.images.length >= 9) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '您最多可选择9张图片',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t\tthis.isImage = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet types;\n\t\t\tswitch (flag) {\n\t\t\t\tcase 0:\n\t\t\t\t\ttypes = ['camera'];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tdefault:\n\t\t\t\t\ttypes = ['album'];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tuni.chooseImage({\n\t\t\t\tsourceType: types,\n\t\t\t\t// sizeType: ['original'],\n\t\t\t\tcount: (9 - this.images.length),\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.images = this.images.concat(res.tempFilePaths);\n\t\t\t\t\tthat.handleNaddImage();\n\t\t\t\t\tif (that.images.length >= 9) {\n\t\t\t\t\t\tthat.isImage = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log(\"授权失败或取消..\", err);\n\t\t\t\t\t// uni.getSetting({\n\t\t\t\t\t// \tsuccess: (res) => {\n\t\t\t\t\t// \t\tlet authStatus = false;\n\t\t\t\t\t// \t\tswitch (flag) {\n\t\t\t\t\t// \t\t\tcase 0:\n\t\t\t\t\t// \t\t\t\tauthStatus = res.authSetting['scope.camera'];\n\t\t\t\t\t// \t\t\t\tbreak;\n\t\t\t\t\t// \t\t\tcase 1:\n\t\t\t\t\t// \t\t\tdefault:\n\t\t\t\t\t// \t\t\t\t authStatus = res.authSetting['scope.album'];\n\t\t\t\t\t// \t\t\t\tbreak;\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t\tif (!authStatus) {\n\t\t\t\t\t// \t\t\tuni.showModal({\n\t\t\t\t\t// \t\t\t\ttitle: '授权失败',\n\t\t\t\t\t// \t\t\t\tcontent: '多啦收票宝需要从您的相机或相册获取图片，请在设置界面打开相关权限',\n\t\t\t\t\t// \t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// \t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t// \t\t\t\t\t\tuni.openSetting();\n\t\t\t\t\t// \t\t\t\t\t}\n\t\t\t\t\t// \t\t\t\t}\n\t\t\t\t\t// \t\t\t})\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t}\n\t\t\t\t\t// });\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 处理取消操作\n\t\thandleCancel() {\n\t\t\tif (this.images.length > 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\tcontent: '您确定放弃上传票据吗？',\n\t\t\t\t\tcancelText: '继续',\n\t\t\t\t\tconfirmText: '放弃',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.navigateBack({});\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\tconsole.log('继续选择/拍照上传票据..');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.navigateBack({});\n\t\t\t}\n\t\t},\n\t\t// 处理删除图片\n\t\thandleDelete(index) {\n\t\t\tthis.images.splice(index, 1);\n\t\t\tif (this.images.length < 9) {\n\t\t\t\tthis.isImage = true;\n\t\t\t}\n\t\t},\n\t\t// 处理提交操作\n\t\thandleSubmit() {\n\t\t\tlet that = this;\n\t\t\t// uni.navigateTo({\n\t\t\t// \turl: '../recgz-images/recgz-images_tt'\n\t\t\t// })\n\t\t\tif (that.images.length == 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '没有可识别的图片，请增加后再提交！',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: function(res) {}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthat.recgzs = [];\n\t\t\tthat.openProgressPopup();\n\t\t\tlet userId = store.state.userInfo.userId;\n\t\t\tif (that.biz == 'dksp') {\n\t\t\t\tuserId = that.userId;\n\t\t\t}\n\t\t\tlet percent = Math.ceil(100 / that.images.length);\n\t\t\tthat.images.forEach((item, index) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthat.singleSubmit(userId, item, percent);\n\t\t\t\t}, index * 1500);\n\t\t\t});\n\t\t},\n\t\t//上传识别图片\n\t\tsingleSubmit(userId, imageSrc, percent) {\n\t\t\tlet that = this;\n\t\t\t// console.log('请求上传识别图片..', imageSrc);\n\t\t\tuni.uploadFile({\n\t\t\t\turl: `${BaseUrl}collect/invoice/OCRCheck`,\n\t\t\t\tfilePath: imageSrc,\n\t\t\t\tfileType: 'image',\n\t\t\t\tname: 'image',\n\t\t\t\tformData: {\n\t\t\t\t\tuserId: userId,\n\t\t\t\t\tbiz: that.biz\n\t\t\t\t},\n\t\t\t\tsuccess: (rsp) => {\n\t\t\t\t\t// console.log(rsp)\n\t\t\t\t\t// console.log('上传识别图片响应..', imageSrc, rsp)\n\t\t\t\t\tif (rsp.statusCode == 200) {\n\t\t\t\t\t\t// console.log('上传识别图片成功..', imageSrc)\n\t\t\t\t\t\tlet res = JSON.parse(rsp.data);\n\t\t\t\t\t\tconsole.log(JSON.stringify(rsp));\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tlet invoices = [];\n\t\t\t\t\t\t\tres.data.forEach((invoice, index) => {\n\t\t\t\t\t\t\t\tinvoice.recgzStatus = invoice.duplicate ? 2 : 1;\n\t\t\t\t\t\t\t\tinvoice.localImageSrc = imageSrc;\n\t\t\t\t\t\t\t\tinvoice.idReiterated = false;\n\t\t\t\t\t\t\t\tinvoices.push(invoice);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthat.recgzs.push(invoices);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// 设置识别失败的默认发票对象\n\t\t\t\t\tlet empty = Clone(InvoiceModel);\n\t\t\t\t\tlet deftType = \"GenerInvoice\";\n\t\t\t\t\tswitch (that.biz) {\n\t\t\t\t\t\tcase 'dksp':\n\t\t\t\t\t\t\tdeftType = 'SpecInvoice';\n\t\t\t\t\t\t\tempty.source = 'DKSP';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'pzsp':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdeftType = 'GenerInvoice';\n\t\t\t\t\t\t\tempty.source = 'YXSP';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tempty.invoiceType = deftType;\n\t\t\t\t\tempty.idReiterated = false;\n\t\t\t\t\tthat.recgzs.push([empty]);\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log('上传失败!!', err);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '抱歉，上传图片时出错',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\t// console.log('识别的进度条累加..')\n\t\t\t\t\tthat.submitPercent += percent;\n\t\t\t\t\t// console.log(that.submitPercent)\n\t\t\t\t\t// console.log('判断是否全部完成..');\n\t\t\t\t\t// 判断是否全部完成\n\t\t\t\t\tif (that.submitPercent >= 100) {\n\t\t\t\t\t\t// 缓存已识别的数据\n\t\t\t\t\t\t// console.log('缓存已识别的数据..');\n\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\tkey: \"RECGZED_IMAGES\",\n\t\t\t\t\t\t\tdata: that.recgzs,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('缓存数据成功跳转..');\n\t\t\t\t\t\t\t\tthat.images = [];\n\t\t\t\t\t\t\t\tthat.submitPercent = 0;\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: `../recgz-images/recgz-images_tt?biz=${that.biz}`\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthat.closeProgressPopup();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\tconsole.log('缓存数据出错提示..');\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: '缓存已识别数据时出错！',\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\tconsole.log('延迟后关闭进度条..');\n\t\t\t\t\t\t\t\t// 延迟1.5秒后关闭进度条\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthat.closeProgressPopup();\n\t\t\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//打开进度条\n\t\topenProgressPopup() {\n\t\t\tthis.$refs.progress.open();\n\t\t},\n\t\t//关闭进度条\n\t\tcloseProgressPopup() {\n\t\t\tthis.$refs.progress.close();\n\t\t},\n\t\t//添加照片\n\t\thandleAddImage() {\n\t\t\tthis.$refs.btn.open();\n\t\t},\n\t\t//取消添加照片\n\t\thandleNaddImage() {\n\t\t\tthis.$refs.btn.close();\n\t\t},\n\t\t// 发票图像错误\n\t\thandleInvoiceImageError() {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载发票图像时出错！',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t});\n\t\t},\n\t\t// 预览发票图像\n\t\thandlePreviewInvoiceImage(images) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: [images],\n\t\t\t\tindicator: 'default'\n\t\t\t});\n\t\t},\n\t}\n}\n","import mod from \"-!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./choose-image_tt.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./choose-image_tt.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586848506230\n      var cssReload = require(\"E:/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}